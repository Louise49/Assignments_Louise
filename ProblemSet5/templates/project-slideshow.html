<!DOCTYPE html>
<html lang="en-US">
<head>

	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<title>国语商配资讯站</title>
    <meta name="keywords" content="">
	<meta name="description" content="">
    <meta name="author" content="国语商配资讯站">

	<!-- Google Fonts -->
	<link href="http://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic,700itali" rel="stylesheet">
	<link href="http://fonts.googleapis.com/css?family=Raleway:400,900,800,700,500,200,100,600" rel="stylesheet">

	<!-- Stylesheets -->
	<link rel="stylesheet" href="static/bootstrap/bootstrap.css">
	<link rel="stylesheet" href="static/css/misc.css">
	<link rel="stylesheet" href="static/css/red-scheme.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.4/leaflet.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.4/leaflet.js"></script>
    <script src="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/leaflet.markercluster.js"></script>

	<!-- JavaScripts -->
	<script src="static/js/jquery-1.10.2.min.js"></script>
	<script src="static/js/jquery-migrate-1.2.1.min.js"></script>

	<link rel="shortcut icon" href="static/images/favicon.ico" type="image/x-icon" />

</head>
<body>

	<div class="responsive_menu">
        <ul class="main_menu">
            <li><a href="/">首页</a></li>
            <li><a href="">简介</a>
            	<ul>
								<li><a href="/map">团队一览</a></li>
								<li><a href="/news">新闻报道</a></li>
								<li><a href="/image">成员介绍</a></li>
            	</ul>
            </li>
            <li><a href="/blog">活动资讯</a></li>
            <li><a href="/archives">经验分享</a></li>
            <li><a href="/contact">联系本站</a></li>
        </ul> <!-- /.main_menu -->
    </div> <!-- /.responsive_menu -->

	<header class="site-header clearfix">
		<div class="container">

			<div class="row">

				<div class="col-md-12">

					<div class="pull-left logo">
						<a href="/">
							<img src="static/images/logo.png" alt="国语商配资讯站">
						</a>
					</div>	<!-- /.logo -->

					<div class="main-navigation pull-right">

						<nav class="main-nav visible-md visible-lg">
							<ul class="sf-menu">
								<li class="active"><a href="/">首页</a></li>
											<li><a href="#">简介</a>
												<ul>
													<li><a href="/slideshow">团队一览</a></li>
													<li><a href="/news">新闻报道</a></li>
													<li><a href="/image">成员介绍</a></li>
					            	</ul>
					            </li>
					            <li><a href="/blog">活动资讯</a></li>
					            <li><a href="/archives">经验分享</a></li>
					            <li><a href="/chart">积分榜</a></li>
							</ul> <!-- /.sf-menu -->

						    <ul class="nav navbar-nav navbar-right">
						      <li><a href="/login"><span class="glyphicon glyphicon-log-in"></span> 登入</a></li>
                              <li><a href="/logout"><span class="glyphicon glyphicon-log-out"></span> 登出</a></li>
                            </ul>

						</nav> <!-- /.main-nav -->

						<!-- This one in here is responsive menu for tablet and mobiles -->
					    <div class="responsive-navigation visible-sm visible-xs">
					        <a href="#nogo" class="menu-toggle-btn">
					            <i class="fa fa-bars"></i>
					        </a>
					    </div> <!-- /responsive_navigation -->

					</div> <!-- /.main-navigation -->

				</div> <!-- /.col-md-12 -->

			</div> <!-- /.row -->

		</div> <!-- /.container -->
	</header> <!-- /.site-header -->

	<div class="first-widget parallax" id="portfolio">
		<div class="parallax-overlay">
			<div class="container pageTitle">
				<div class="row">
					<div class="col-md-6 col-sm-6">
						<h2 class="page-title">团队一览</h2>
					</div> <!-- /.col-md-6 -->
					<div class="col-md-6 col-sm-6 text-right">
						<span class="page-location">简介 / 团队一览</span>
					</div> <!-- /.col-md-6 -->
				</div> <!-- /.row -->
			</div> <!-- /.container -->
		</div> <!-- /.parallax-overlay -->
	</div> <!-- /.pageTitle -->

	<section class="cta clearfix">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<h4 class="cta-title"><strong>想知道八大团队都在哪儿吗？</strong> 点击查看位置信息！</h4>
              <button type="button" class="btn btn-warning" id='roll_up' onclick="show_districts();">显示位置</button>
			  <button type="button" class="btn btn-info" id='roll_up' onclick="clear_markers();">清除图标</button>
				</div> <!-- /.col-md-12 -->
			</div> <!-- /.row -->
		</div> <!-- /.container -->
	</section> <!-- /.cta -->

	<div class="container">
	    <div class="row">
			 <div class="col-xs-12 col-sm-12 col-md-12">
					<center><div id="map" style="width: 800px; height: 440px; border: 1px solid #AAA;"></div></center>
			 </div>
		</div>
    </div>

	<footer class="site-footer">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<nav class="footer-nav clearfix">
						<ul class="footer-menu">
							<li><a href="/">首页</a></li>
							<li><a href="/slideshow">简介</a></li>
							<li><a href="/blog">活动资讯</a></li>
							<li><a href="/archives">经验分享</a></li>
							<li><a href="/contact">联系本站</a></li>
						</ul> <!-- /.footer-menu -->
					</nav> <!-- /.footer-nav -->
				</div> <!-- /.col-md-12 -->
			</div> <!-- /.row -->
			<div class="row">
				<div class="col-md-12">
					<p class="copyright-text">Copyright &copy; 2019 国语商配资讯站
                    | 设计: Louise</p>
				</div> <!-- /.col-md-12 -->
			</div> <!-- /.row -->
		</div> <!-- /.container -->
	</footer> <!-- /.site-footer -->

	<!-- Scripts -->
	<script src="static/js/min/plugins.min.js"></script>
	<script src="static/js/min/medigo-custom.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<script>
    var mapboxTiles = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {attribution: 'Map data &copy; <a href="https://openstreetmap.org">OpenStreetMap</a>', maxZoom: 18,});

    var map = L.map('map')
       .addLayer(mapboxTiles)
       .setView([34.7428137, 113.523092], 5);

     layerGroup = L.layerGroup().addTo(map);

     var items = {};
     var data = [];
     {% for row in  entries  %}
          items = {};
          items["name"] = "{{ row["Companies"] }}";
          items["url"] = "{{ row["Weibo_Links"] }}";
          items["image_url"] = "{{ row["Logos"] }}";
          items["latitud"] = {{ row["Lat"] }};
          items["longitud"] = {{ row["Lng"] }};
          data.push(items);
          console.log(items);
      {% endfor %}
</script>
<script>
    function show_districts(){
    for (var i in data) {
    	var Icon = L.icon({
    iconUrl: 'static/images/marker.png',
    iconSize:     [20, 30],
    iconAnchor:   [0, 0],
    popupAnchor:  [0, 0]
    });
    		var latlng = L.latLng({ lat: data[i].latitud, lng: data[i].longitud });
    		L.marker( latlng, {icon: Icon} )
    				.bindPopup( '<a href="' + data[i].url + '" target="_blank">' + '<img src="' + data[i].image_url+'" width = "80px"><br>'+data[i].name + '</a>'  )
    				.addTo(layerGroup);
    }
    }

    function clear_markers () {
                   // map.removeLayer(marker);
                   layerGroup.clearLayers();
    }
</script>

</body>
</html>
